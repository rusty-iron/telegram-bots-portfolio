# =============================================================================
# MeatBot Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# IMPORTANT: Never commit .env file to git!
# =============================================================================

# -----------------------------------------------------------------------------
# Telegram Bot Configuration
# -----------------------------------------------------------------------------
# Get your bot token from @BotFather on Telegram
BOT_TOKEN=your_bot_token_here

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# PostgreSQL connection URL
# Format: postgresql+psycopg://user:password@host:port/database
DATABASE_URL=postgresql+psycopg://postgres:postgres@db:5432/meatbot

# PostgreSQL password (used in docker-compose.yml)
POSTGRES_PASSWORD=postgres

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
# Redis password for authentication
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
REDIS_PASSWORD=generate_random_redis_password_here

# Redis connection URL for caching (include password after colon)
REDIS_URL=redis://:your_redis_password@redis:6379/0

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
# Environment: development, staging, production
ENV=development

# Web server host and port (for health checks and metrics)
WEB_APP_HOST=0.0.0.0
WEB_APP_PORT=8000

# Logging level: debug, info, warning, error, critical
LOG_LEVEL=info

# Run database migrations on startup (true/false)
RUN_MIGRATIONS_ON_START=false

# Timezone for Docker containers
TZ=UTC

# -----------------------------------------------------------------------------
# Celery Configuration (Background Tasks)
# -----------------------------------------------------------------------------
# Celery broker URL (Redis with password)
CELERY_BROKER_URL=redis://:your_redis_password@redis:6379/1

# Celery result backend (Redis with password)
CELERY_RESULT_BACKEND=redis://:your_redis_password@redis:6379/2

# Celery task serializer (SECURITY: use json, not pickle)
CELERY_TASK_SERIALIZER=json

# Celery result serializer (SECURITY: use json, not pickle)
CELERY_RESULT_SERIALIZER=json

# Celery accepted content types (SECURITY: json only, prevents pickle RCE)
CELERY_ACCEPT_CONTENT=json

# Celery timezone
CELERY_TIMEZONE=UTC

# Celery enable UTC
CELERY_ENABLE_UTC=true

# Celery task time limit (in seconds)
CELERY_TASK_TIME_LIMIT=1800

# Celery task soft time limit (in seconds)
CELERY_TASK_SOFT_TIME_LIMIT=1500

# -----------------------------------------------------------------------------
# Cache Configuration
# -----------------------------------------------------------------------------
# Enable caching (true/false)
CACHE_ENABLED=true

# Default cache TTL in seconds (1 hour)
CACHE_DEFAULT_TTL=3600

# Catalog cache TTL in seconds (30 minutes)
CACHE_CATALOG_TTL=1800

# Products cache TTL in seconds (15 minutes)
CACHE_PRODUCTS_TTL=900

# Sessions cache TTL in seconds (24 hours)
CACHE_SESSIONS_TTL=86400

# -----------------------------------------------------------------------------
# Image Optimization Settings
# -----------------------------------------------------------------------------
# Enable image optimization (true/false)
IMAGE_OPTIMIZATION_ENABLED=true

# Maximum image size in bytes (5 MB)
IMAGE_MAX_SIZE=5242880

# Image quality (0-100)
IMAGE_QUALITY=85

# Image format (JPEG, PNG, WEBP)
IMAGE_FORMAT=WEBP

# -----------------------------------------------------------------------------
# Security Settings
# -----------------------------------------------------------------------------
# Enable security features (true/false)
SECURITY_ENABLED=true

# API key for health/metrics endpoints
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
API_KEY=generate_random_api_key_here

# Admin API key for admin endpoints
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
ADMIN_KEY=generate_random_admin_key_here

# Encryption key for sensitive data
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=generate_random_encryption_key_here

# Rate limiting: max requests per window
RATE_LIMIT_REQUESTS=100

# Rate limiting: time window in seconds
RATE_LIMIT_WINDOW=60

# Enable file scanning for malware (true/false)
FILE_SCAN_ENABLED=true

# Maximum file upload size in bytes (10 MB)
MAX_FILE_SIZE=10485760

# Allowed file types (comma-separated)
ALLOWED_FILE_TYPES=jpg,jpeg,png,webp

# -----------------------------------------------------------------------------
# Docker Configuration (if using docker-compose)
# -----------------------------------------------------------------------------
# These are automatically set by docker-compose, but you can override them

# PostgreSQL database name
# POSTGRES_DB=meatbot

# PostgreSQL user
# POSTGRES_USER=postgres

# -----------------------------------------------------------------------------
# Development Settings (optional)
# -----------------------------------------------------------------------------
# Enable debug mode (true/false)
# DEBUG=false

# Enable hot reload (true/false)
# HOT_RELOAD=false

# -----------------------------------------------------------------------------
# Production Settings (optional)
# -----------------------------------------------------------------------------
# Sentry DSN for error tracking
# SENTRY_DSN=your_sentry_dsn_here

# Prometheus metrics port
# PROMETHEUS_PORT=9090

# Grafana URL
# GRAFANA_URL=http://localhost:3000

# =============================================================================
# How to generate secure keys:
# =============================================================================
# API_KEY and ADMIN_KEY:
#   python -c "import secrets; print(secrets.token_urlsafe(32))"
#
# ENCRYPTION_KEY:
#   python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
#
# BOT_TOKEN:
#   Get from @BotFather on Telegram
# =============================================================================
